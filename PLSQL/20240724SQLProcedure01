-- 실습 19-1 저장 프로시저
CREATE OR REPLACE PROCEDURE PRO_NOPARAM
IS
    V_EMPNO NUMBER(4) := 7788;
    V_ENAME VARCHAR2(10);
BEGIN
    V_ENAME := 'SCOTT';
    DBMS_OUTPUT.PUT_LINE(V_EMPNO);
    DBMS_OUTPUT.PUT_LINE(V_ENAME);
END;
/
SET SERVEROUTPUT ON;
EXECUTE PRO_NOPARAM;

-- 익명 프로시저 실행
BEGIN
    PRO_NOPARAM;
END;
/

-- 실습 19-4 USER_SOURCE 프로시저 확인
SELECT * FROM USER_SOURCE
WHERE NAME = 'PRO_NOPARAM';
-- 실습 19-5 텍스트로 출력
SELECT TEXT FROM USER_SOURCE
WHERE NAME = 'PRO_NOPARAM';
-- 삭제하기
DROP PROCEDURE PRO_NOPARAM;

-- 실습 19-7 파라미터 사용하는 프로시저
CREATE OR REPLACE PROCEDURE PRO_PARAM_IN
(
    PARAM1 IN NUMBER,
    PARAM2 NUMBER,
    PARAM3 NUMBER := 3,
    PARAM4 NUMBER DEFAULT 4
)
IS
BEGIN
    DBMS_OUTPUT.PUT_LINE('PARAM1 : ' || PARAM1);
    DBMS_OUTPUT.PUT_LINE('PARAM2 : ' || PARAM2);
    DBMS_OUTPUT.PUT_LINE('PARAM3 : ' || PARAM3);
    DBMS_OUTPUT.PUT_LINE('PARAM4 : ' || PARAM4);
END;
/

-- 실습 19-12 OUT 모드 파라미터 정의
CREATE OR REPLACE PROCEDURE PRO_PARAM_OUT
(
    IN_EMPNO IN EMP.EMPNO%TYPE,
    OUT_ENAME OUT EMP.ENAME%TYPE,
    OUT_SAL OUT EMP.SAL%TYPE
)
IS
BEGIN
    SELECT ENAME, SAL INTO OUT_ENAME, OUT_SAL FROM EMP
    WHERE EMPNO = IN_EMPNO;
END PRO_PARAM_OUT;
/

-- 실습 19-13 OUT모드 파라미터 사용
DECLARE
    V_ENAME EMP.ENAME%TYPE;
    V_SAL EMP.SAL%TYPE;
BEGIN
    PRO_PARAM_OUT(7782, V_ENAME, V_SAL);
    DBMS_OUTPUT.PUT_LINE('ENAME : ' || V_ENAME);
    DBMS_OUTPUT.PUT_LINE('SAL : ' || V_SAL);
END;
/
